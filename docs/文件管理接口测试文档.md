# æ–‡ä»¶ç®¡ç†æ¥å£æµ‹è¯•æ–‡æ¡£

## è®¤è¯è¯´æ˜

æ‰€æœ‰æ–‡ä»¶ç®¡ç†æ¥å£éƒ½éœ€è¦åœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ ï¼š
```
Authorization: Bearer {access_token}
```

è·å–ç”¨æˆ· tokenï¼š
**POST** `/api/v1/auth/login`

è¯·æ±‚ä½“ï¼š
```json
{
  "email": "user@example.com",
  "password": "password123"
}
```

---

## 1. æ–‡ä»¶ä¸Šä¼ æ¥å£

**POST** `/api/v1/uploads`

Content-Type: `multipart/form-data`

### è¯·æ±‚å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| `file` | File | æ˜¯ | ä¸Šä¼ çš„æ–‡ä»¶ | äºŒè¿›åˆ¶æ–‡ä»¶ |
| `type` | string | æ˜¯ | æ–‡ä»¶ç±»å‹æšä¸¾ | "product_image" |
| `relatedId` | number | å¦ | å…³è”IDï¼ˆå¦‚äº§å“IDã€å…¬å¸IDç­‰ï¼‰ | 123 |

## ğŸš€ æ–‡ä»¶ä¸Šä¼ æ¶æ„å‡çº§

### ä¸Šä¼ æµç¨‹ä¼˜åŒ–

æœ¬ç³»ç»Ÿé‡‡ç”¨**"æœ¬åœ°ä¸´æ—¶æ–‡ä»¶ + TOSç›´ä¼ "**çš„ä¼˜åŒ–æ¶æ„ï¼š

```
å‰ç«¯æ–‡ä»¶ â†’ æœåŠ¡å™¨ä¸´æ—¶å­˜å‚¨ â†’ TOSäº‘å­˜å‚¨ â†’ è‡ªåŠ¨æ¸…ç†ä¸´æ—¶æ–‡ä»¶
```

**ä¼˜åŠ¿ï¼š**
- âœ… **é¿å…HTTPSåè®®é™åˆ¶**ï¼šä½¿ç”¨TOSçš„`putObjectFromFile`æ¥å£ï¼Œæ”¯æŒHTTPå¼€å‘ç¯å¢ƒ
- âœ… **æ”¯æŒä¸Šä¼ è¿›åº¦ç›‘æ§**ï¼šå®æ—¶ç›‘æ§ä¸Šä¼ è¿›åº¦ï¼Œæ”¯æŒè¿›åº¦å›è°ƒ
- âœ… **æé«˜ä¸Šä¼ å¯é æ€§**ï¼šå‡å°‘å†…å­˜å ç”¨ï¼Œé€‚åˆå¤§æ–‡ä»¶ä¸Šä¼ 
- âœ… **è‡ªåŠ¨æ¸…ç†æœºåˆ¶**ï¼šä¸Šä¼ å®Œæˆè‡ªåŠ¨åˆ é™¤ä¸´æ—¶æ–‡ä»¶

### è¿›åº¦ç›‘æ§åŠŸèƒ½

ç³»ç»Ÿé›†æˆäº†TOS SDKçš„è¿›åº¦å›è°ƒåŠŸèƒ½ï¼š

```typescript
dataTransferStatusChange: (event) => {
  const percentage = Math.round((event.consumedBytes / event.totalBytes) * 100);
  console.log(`Upload progress: ${percentage}%`);
}
```

**è¿›åº¦äº‹ä»¶ç±»å‹ï¼š**
- `started` - å¼€å§‹ä¸Šä¼ 
- `progress` - ä¸Šä¼ è¿›è¡Œä¸­  
- `completed` - ä¸Šä¼ å®Œæˆ
- `failed` - ä¸Šä¼ å¤±è´¥

### æ–‡ä»¶ç±»å‹æšä¸¾å€¼

| æšä¸¾å€¼ | è¯´æ˜ | ç”¨é€” |
|--------|------|------|
| `product_image` | äº§å“å›¾ç‰‡ | äº§å“å±•ç¤ºå›¾ç‰‡ |
| `company_certificate` | ä¼ä¸šè¯ä¹¦ | ä¼ä¸šèµ„è´¨è¯ä¹¦ã€è¥ä¸šæ‰§ç…§ç­‰ |
| `sample_document` | æ ·å“æ–‡æ¡£ | æ ·å“ç›¸å…³æ–‡æ¡£ |
| `registration_document` | æ³¨å†Œæ–‡æ¡£ | æ³¨å†Œç›¸å…³æ–‡æ¡£ |
| `other` | å…¶ä»– | å…¶ä»–ç±»å‹æ–‡ä»¶ |

### æ”¯æŒçš„æ–‡ä»¶æ ¼å¼

**å›¾ç‰‡æ ¼å¼ï¼š**
- JPG/JPEG
- PNG
- GIF
- BMP
- WEBP

**æ–‡æ¡£æ ¼å¼ï¼š**
- PDF
- DOC/DOCX
- XLS/XLSX
- PPT/PPTX
- TXT

### æ–‡ä»¶å¤§å°é™åˆ¶

- æœ€å¤§æ–‡ä»¶å¤§å°ï¼š10MB
- å»ºè®®å›¾ç‰‡å¤§å°ï¼š< 5MB
- å»ºè®®æ–‡æ¡£å¤§å°ï¼š< 8MB

### è¯·æ±‚ç¤ºä¾‹

```bash
curl -X POST "http://localhost:3010/api/v1/uploads" \
  -H "Authorization: Bearer {access_token}" \
  -F "file=@/path/to/your/image.jpg" \
  -F "type=product_image" \
  -F "relatedId=123"
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº” (201)ï¼š**
```json
{
  "id": 1,
  "filename": "1736789123456-001.jpg",
  "originalName": "product_photo.jpg",
  "mimetype": "image/jpeg",
  "size": 2048576,
  "storageKey": "product_image/1/1736789123456-001.jpg",
  "url": "https://cdn.example.com/product_image/1/1736789123456-001.jpg",
  "type": "product_image",
  "relatedId": 123,
  "uploadedById": 1,
  "createdAt": "2025-01-13T12:00:00+08:00",
  "updatedAt": "2025-01-13T12:00:00+08:00"
}
```

**é”™è¯¯å“åº” (400)ï¼š**
```json
{
  "message": "æ–‡ä»¶æ ¼å¼ä¸æ”¯æŒï¼Œä»…æ”¯æŒå›¾ç‰‡å’Œæ–‡æ¡£æ ¼å¼",
  "error": "Bad Request",
  "statusCode": 400
}
```

---

## 2. è·å–æˆ‘çš„æ–‡ä»¶åˆ—è¡¨

**GET** `/api/v1/uploads/my-files?page=1&limit=20&type=product_image`

### æŸ¥è¯¢å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| `page` | number | å¦ | é¡µç ï¼Œé»˜è®¤1 | 1 |
| `limit` | number | å¦ | æ¯é¡µæ¡æ•°ï¼Œé»˜è®¤20 | 20 |
| `type` | string | å¦ | æ–‡ä»¶ç±»å‹ç­›é€‰ | "product_image" |

### è¯·æ±‚ç¤ºä¾‹

```bash
curl -X GET "http://localhost:3010/api/v1/uploads/my-files?page=1&limit=10&type=product_image" \
  -H "Authorization: Bearer {access_token}"
```

### å“åº”ç¤ºä¾‹

```json
{
  "data": [
    {
      "id": 1,
      "filename": "1736789123456-001.jpg",
      "originalName": "product_photo.jpg",
      "mimetype": "image/jpeg",
      "size": 2048576,
      "storageKey": "product_image/1/1736789123456-001.jpg",
      "url": "https://cdn.example.com/product_image/1/1736789123456-001.jpg",
      "type": "product_image",
      "relatedId": 123,
      "uploadedById": 1,
      "createdAt": "2025-01-13T12:00:00+08:00",
      "updatedAt": "2025-01-13T12:00:00+08:00"
    }
  ],
  "meta": {
    "totalItems": 50,
    "itemCount": 1,
    "itemsPerPage": 10,
    "totalPages": 5,
    "currentPage": 1
  }
}
```

---

## 3. æ ¹æ®ç±»å‹è·å–æ–‡ä»¶åˆ—è¡¨

**GET** `/api/v1/uploads/by-type/{type}?page=1&limit=20&relatedId=123`

### è·¯å¾„å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| `type` | string | æ˜¯ | æ–‡ä»¶ç±»å‹æšä¸¾å€¼ |

### æŸ¥è¯¢å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| `page` | number | å¦ | é¡µç ï¼Œé»˜è®¤1 | 1 |
| `limit` | number | å¦ | æ¯é¡µæ¡æ•°ï¼Œé»˜è®¤20 | 20 |
| `relatedId` | number | å¦ | å…³è”IDç­›é€‰ | 123 |

### æƒé™è¯´æ˜

- **ä¼ä¸šè¯ä¹¦ (company_certificate)**ï¼šåªèƒ½æŸ¥çœ‹è‡ªå·±å…¬å¸çš„æ–‡ä»¶
- **äº§å“å›¾ç‰‡ (product_image)**ï¼šéœ€è¦éªŒè¯äº§å“æ‰€æœ‰æƒ
- **å…¶ä»–ç±»å‹**ï¼šæ ¹æ®ä¸šåŠ¡é€»è¾‘åˆ¤æ–­æƒé™

### è¯·æ±‚ç¤ºä¾‹

```bash
curl -X GET "http://localhost:3010/api/v1/uploads/by-type/product_image?relatedId=123" \
  -H "Authorization: Bearer {access_token}"
```

### å“åº”ç¤ºä¾‹

```json
{
  "data": [
    {
      "id": 1,
      "filename": "1736789123456-001.jpg",
      "originalName": "product_photo.jpg",
      "mimetype": "image/jpeg",
      "size": 2048576,
      "url": "https://cdn.example.com/product_image/1/1736789123456-001.jpg",
      "type": "product_image",
      "relatedId": 123,
      "uploadedBy": {
        "id": 1,
        "name": "å¼ ä¸‰",
        "email": "user@example.com"
      },
      "createdAt": "2025-01-13T12:00:00+08:00"
    }
  ],
  "meta": {
    "totalItems": 5,
    "itemCount": 1,
    "itemsPerPage": 20,
    "totalPages": 1,
    "currentPage": 1
  }
}
```

---

## 4. è·å–æ–‡ä»¶ä¿¡æ¯

**GET** `/api/v1/uploads/{id}`

### è·¯å¾„å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| `id` | number | æ˜¯ | æ–‡ä»¶ID |

### è¯·æ±‚ç¤ºä¾‹

```bash
curl -X GET "http://localhost:3010/api/v1/uploads/1" \
  -H "Authorization: Bearer {access_token}"
```

### å“åº”ç¤ºä¾‹

```json
{
  "id": 1,
  "filename": "1736789123456-001.jpg",
  "originalName": "product_photo.jpg",
  "mimetype": "image/jpeg",
  "size": 2048576,
  "storageKey": "product_image/1/1736789123456-001.jpg",
  "url": "https://cdn.example.com/product_image/1/1736789123456-001.jpg",
  "type": "product_image",
  "relatedId": 123,
  "uploadedById": 1,
  "uploadedBy": {
    "id": 1,
    "name": "å¼ ä¸‰",
    "email": "user@example.com"
  },
  "createdAt": "2025-01-13T12:00:00+08:00",
  "updatedAt": "2025-01-13T12:00:00+08:00"
}
```

---

## 5. è·å–æ–‡ä»¶è®¿é—®URL

**GET** `/api/v1/uploads/{id}/url`

### ç”¨é€”

- è·å–æ–‡ä»¶çš„è®¿é—®URL
- ç”¨äºåœ¨å‰ç«¯æ˜¾ç¤ºæ–‡ä»¶é“¾æ¥
- å¯èƒ½è¿”å›CDNåŠ é€Ÿåçš„URL

### è¯·æ±‚ç¤ºä¾‹

```bash
curl -X GET "http://localhost:3010/api/v1/uploads/1/url" \
  -H "Authorization: Bearer {access_token}"
```

### å“åº”ç¤ºä¾‹

```json
{
  "id": 1,
  "url": "https://cdn.example.com/product_image/1/1736789123456-001.jpg",
  "filename": "1736789123456-001.jpg"
}
```

---

## 6. ä¸‹è½½æ–‡ä»¶

**GET** `/api/v1/uploads/{id}/download`

### ç”¨é€”

- ä¸‹è½½æ–‡ä»¶åˆ°æœ¬åœ°
- è‡ªåŠ¨è®¾ç½®æ­£ç¡®çš„æ–‡ä»¶åå’ŒContent-Type
- è§¦å‘æµè§ˆå™¨ä¸‹è½½è¡Œä¸º

### è¯·æ±‚ç¤ºä¾‹

```bash
curl -X GET "http://localhost:3010/api/v1/uploads/1/download" \
  -H "Authorization: Bearer {access_token}" \
  -O -J
```

### å“åº”å¤´

```
Content-Type: image/jpeg
Content-Disposition: attachment; filename="product_photo.jpg"
Content-Length: 2048576
```

### å“åº”ä½“

æ–‡ä»¶çš„äºŒè¿›åˆ¶å†…å®¹

---

## 7. é¢„è§ˆæ–‡ä»¶ï¼ˆå›¾ç‰‡ï¼‰

**GET** `/api/v1/uploads/{id}/preview`

### ç”¨é€”

- åœ¨çº¿é¢„è§ˆå›¾ç‰‡æ–‡ä»¶
- åªæ”¯æŒå›¾ç‰‡æ ¼å¼ï¼ˆimage/*ï¼‰
- è®¾ç½®ç¼“å­˜å¤´ä¼˜åŒ–æ€§èƒ½

### è¯·æ±‚ç¤ºä¾‹

```bash
curl -X GET "http://localhost:3010/api/v1/uploads/1/preview" \
  -H "Authorization: Bearer {access_token}"
```

### å“åº”å¤´

```
Content-Type: image/jpeg
Cache-Control: public, max-age=3600
```

### å“åº”ä½“

å›¾ç‰‡çš„äºŒè¿›åˆ¶å†…å®¹

### é”™è¯¯å“åº”

**éå›¾ç‰‡æ–‡ä»¶ (400)ï¼š**
```json
{
  "message": "æ–‡ä»¶ç±»å‹ä¸æ”¯æŒé¢„è§ˆï¼Œä»…æ”¯æŒå›¾ç‰‡æ ¼å¼",
  "error": "Bad Request",
  "statusCode": 400
}
```

---

## 8. åˆ é™¤æ–‡ä»¶

**DELETE** `/api/v1/uploads/{id}`

### æƒé™è¯´æ˜

- åªèƒ½åˆ é™¤è‡ªå·±ä¸Šä¼ çš„æ–‡ä»¶
- åˆ é™¤æ“ä½œä¼šåŒæ—¶åˆ é™¤äº‘å­˜å‚¨ä¸­çš„æ–‡ä»¶å’Œæ•°æ®åº“è®°å½•
- åˆ é™¤æ“ä½œä¸å¯æ¢å¤

### è¯·æ±‚ç¤ºä¾‹

```bash
curl -X DELETE "http://localhost:3010/api/v1/uploads/1" \
  -H "Authorization: Bearer {access_token}"
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸå“åº” (200)ï¼š**
```json
{
  "message": "æ–‡ä»¶åˆ é™¤æˆåŠŸ"
}
```

**æƒé™ä¸è¶³ (403)ï¼š**
```json
{
  "message": "æ‚¨åªèƒ½åˆ é™¤è‡ªå·±ä¸Šä¼ çš„æ–‡ä»¶",
  "error": "Forbidden",
  "statusCode": 403
}
```

---

## 9. äº‘å­˜å‚¨æ¶æ„è¯´æ˜

### å­˜å‚¨æœåŠ¡

- **äº‘æœåŠ¡å•†**ï¼šç«å±±å¼•æ“TOS (Tinder Object Storage)
- **CDNåŠ é€Ÿ**ï¼šæ”¯æŒCDNåŸŸåé…ç½®
- **å­˜å‚¨ç»“æ„**ï¼š`{æ–‡ä»¶ç±»å‹}/{ç”¨æˆ·ID}/{æ—¶é—´æˆ³}-{éšæœºæ•°}.{æ‰©å±•å}`

### æ–‡ä»¶å‘½åè§„åˆ™

```
äº§å“å›¾ç‰‡ç¤ºä¾‹ï¼šproduct_image/123/1736789123456-001.jpg
ä¼ä¸šè¯ä¹¦ç¤ºä¾‹ï¼šcompany_certificate/123/1736789123456-002.pdf
æ ·å“æ–‡æ¡£ç¤ºä¾‹ï¼šsample_document/123/1736789123456-003.docx
```

### å®‰å…¨ç‰¹æ€§

- **è®¿é—®æƒé™æ§åˆ¶**ï¼šåŸºäºç”¨æˆ·èº«ä»½å’Œæ–‡ä»¶ç±»å‹
- **æ–‡ä»¶å¤§å°é™åˆ¶**ï¼šé˜²æ­¢æ¶æ„ä¸Šä¼ å¤§æ–‡ä»¶
- **æ–‡ä»¶æ ¼å¼æ£€æŸ¥**ï¼šåªå…è®¸ç‰¹å®šæ ¼å¼æ–‡ä»¶
- **å­˜å‚¨éš”ç¦»**ï¼šæŒ‰ç”¨æˆ·å’Œç±»å‹åˆ†ç›®å½•å­˜å‚¨

---

## 10. é”™è¯¯ç è¯´æ˜

| çŠ¶æ€ç  | è¯´æ˜ | å¸¸è§åŸå›  |
|--------|------|----------|
| 200 | è¯·æ±‚æˆåŠŸ | - |
| 201 | åˆ›å»ºæˆåŠŸ | æ–‡ä»¶ä¸Šä¼ æˆåŠŸ |
| 400 | è¯·æ±‚é”™è¯¯ | æ–‡ä»¶æ ¼å¼ä¸æ”¯æŒã€æ–‡ä»¶è¿‡å¤§ã€ç¼ºå°‘å¿…è¦å‚æ•° |
| 401 | æœªè®¤è¯ | Tokenæ— æ•ˆæˆ–è¿‡æœŸ |
| 403 | æƒé™ä¸è¶³ | æ— æ–‡ä»¶è®¿é—®æˆ–åˆ é™¤æƒé™ |
| 404 | èµ„æºä¸å­˜åœ¨ | æ–‡ä»¶ä¸å­˜åœ¨æˆ–å·²è¢«åˆ é™¤ |
| 413 | æ–‡ä»¶è¿‡å¤§ | è¶…è¿‡10MBé™åˆ¶ |
| 415 | åª’ä½“ç±»å‹ä¸æ”¯æŒ | æ–‡ä»¶æ ¼å¼ä¸åœ¨å…è®¸åˆ—è¡¨ä¸­ |
| 500 | æœåŠ¡å™¨é”™è¯¯ | äº‘å­˜å‚¨æœåŠ¡å¼‚å¸¸ã€ç½‘ç»œé”™è¯¯ç­‰ |

---

## 11. æµ‹è¯•ç”¨ä¾‹

### 11.1 æ–‡ä»¶ä¸Šä¼ æµ‹è¯•

**åŸºç¡€åŠŸèƒ½æµ‹è¯•ï¼š**

1. **å›¾ç‰‡ä¸Šä¼ æµ‹è¯•**
   ```bash
   # ä¸Šä¼ äº§å“å›¾ç‰‡
   curl -X POST "http://localhost:3010/api/v1/uploads" \
     -H "Authorization: Bearer {token}" \
     -F "file=@test_product.jpg" \
     -F "type=product_image" \
     -F "relatedId=1"
   ```

2. **æ–‡æ¡£ä¸Šä¼ æµ‹è¯•**
   ```bash
   # ä¸Šä¼ ä¼ä¸šè¯ä¹¦
   curl -X POST "http://localhost:3010/api/v1/uploads" \
     -H "Authorization: Bearer {token}" \
     -F "file=@certificate.pdf" \
     -F "type=company_certificate"
   ```

**è¾¹ç•Œæ¡ä»¶æµ‹è¯•ï¼š**

3. **å¤§æ–‡ä»¶æµ‹è¯•**
   - æµ‹è¯•æ¥è¿‘10MBçš„æ–‡ä»¶
   - æµ‹è¯•è¶…è¿‡10MBçš„æ–‡ä»¶ï¼ˆåº”è¯¥å¤±è´¥ï¼‰

4. **æ ¼å¼æµ‹è¯•**
   - æµ‹è¯•æ”¯æŒçš„æ ¼å¼ï¼ˆJPGã€PNGã€PDFç­‰ï¼‰
   - æµ‹è¯•ä¸æ”¯æŒçš„æ ¼å¼ï¼ˆEXEã€BATç­‰ï¼‰

5. **å‚æ•°éªŒè¯æµ‹è¯•**
   - ç¼ºå°‘fileå‚æ•°
   - æ— æ•ˆçš„typeæšä¸¾å€¼
   - æ— æ•ˆçš„relatedId

### 11.2 æƒé™æ§åˆ¶æµ‹è¯•

**è®¿é—®æƒé™æµ‹è¯•ï¼š**

1. **æ–‡ä»¶æ‰€æœ‰è€…è®¿é—®**
   ```bash
   # ç”¨æˆ·Aè®¿é—®è‡ªå·±ä¸Šä¼ çš„æ–‡ä»¶
   curl -X GET "http://localhost:3010/api/v1/uploads/1" \
     -H "Authorization: Bearer {user_a_token}"
   ```

2. **éæ‰€æœ‰è€…è®¿é—®**
   ```bash
   # ç”¨æˆ·Bå°è¯•è®¿é—®ç”¨æˆ·Açš„æ–‡ä»¶
   curl -X GET "http://localhost:3010/api/v1/uploads/1" \
     -H "Authorization: Bearer {user_b_token}"
   ```

3. **ä¼ä¸šæ–‡ä»¶æƒé™**
   ```bash
   # åŒä¼ä¸šç”¨æˆ·è®¿é—®ä¼ä¸šè¯ä¹¦
   curl -X GET "http://localhost:3010/api/v1/uploads/by-type/company_certificate" \
     -H "Authorization: Bearer {same_company_token}"
   ```

### 11.3 æ–‡ä»¶æ“ä½œæµ‹è¯•

**ä¸‹è½½å’Œé¢„è§ˆæµ‹è¯•ï¼š**

1. **å›¾ç‰‡é¢„è§ˆ**
   ```bash
   curl -X GET "http://localhost:3010/api/v1/uploads/1/preview" \
     -H "Authorization: Bearer {token}" \
     -o preview_image.jpg
   ```

2. **æ–‡ä»¶ä¸‹è½½**
   ```bash
   curl -X GET "http://localhost:3010/api/v1/uploads/2/download" \
     -H "Authorization: Bearer {token}" \
     -O -J
   ```

**åˆ é™¤æµ‹è¯•ï¼š**

3. **åˆ é™¤è‡ªå·±çš„æ–‡ä»¶**
   ```bash
   curl -X DELETE "http://localhost:3010/api/v1/uploads/1" \
     -H "Authorization: Bearer {token}"
   ```

4. **åˆ é™¤ä»–äººæ–‡ä»¶ï¼ˆåº”è¯¥å¤±è´¥ï¼‰**
   ```bash
   curl -X DELETE "http://localhost:3010/api/v1/uploads/2" \
     -H "Authorization: Bearer {other_user_token}"
   ```

### 11.4 æŸ¥è¯¢åŠŸèƒ½æµ‹è¯•

1. **åˆ†é¡µæŸ¥è¯¢**
   ```bash
   curl -X GET "http://localhost:3010/api/v1/uploads/my-files?page=1&limit=5" \
     -H "Authorization: Bearer {token}"
   ```

2. **ç±»å‹ç­›é€‰**
   ```bash
   curl -X GET "http://localhost:3010/api/v1/uploads/my-files?type=product_image" \
     -H "Authorization: Bearer {token}"
   ```

3. **å…³è”IDç­›é€‰**
   ```bash
   curl -X GET "http://localhost:3010/api/v1/uploads/by-type/product_image?relatedId=123" \
     -H "Authorization: Bearer {token}"
   ```

---

## 12. æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 12.1 ä¸Šä¼ ä¼˜åŒ–

- **å®¢æˆ·ç«¯å‹ç¼©**ï¼šå›¾ç‰‡åœ¨å®¢æˆ·ç«¯å‹ç¼©åä¸Šä¼ 
- **åˆ†ç‰‡ä¸Šä¼ **ï¼šå¤§æ–‡ä»¶è€ƒè™‘åˆ†ç‰‡ä¸Šä¼ 
- **æ ¼å¼è½¬æ¢**ï¼šè‡ªåŠ¨å°†BMPç­‰æ ¼å¼è½¬ä¸ºJPG

### 12.2 è®¿é—®ä¼˜åŒ–

- **CDNç¼“å­˜**ï¼šé™æ€æ–‡ä»¶é€šè¿‡CDNåˆ†å‘
- **é¢„ç­¾åURL**ï¼šç”Ÿæˆä¸´æ—¶è®¿é—®é“¾æ¥
- **ç¼“å­˜ç­–ç•¥**ï¼šè®¾ç½®åˆç†çš„ç¼“å­˜å¤´

### 12.3 å­˜å‚¨ä¼˜åŒ–

- **æ–‡ä»¶å‹ç¼©**ï¼šè‡ªåŠ¨å‹ç¼©å›¾ç‰‡æ–‡ä»¶
- **é‡å¤æ£€æµ‹**ï¼šæ£€æµ‹é‡å¤æ–‡ä»¶é¿å…å†—ä½™å­˜å‚¨
- **å®šæœŸæ¸…ç†**ï¼šæ¸…ç†æ— å…³è”çš„å­¤å„¿æ–‡ä»¶

---

## 13. ç¯å¢ƒé…ç½®

### å¼€å‘ç¯å¢ƒ

- **åç«¯æœåŠ¡URL**: http://localhost:3010
- **APIåŸºç¡€è·¯å¾„**: http://localhost:3010/api/v1
- **Swaggeræ–‡æ¡£**: http://localhost:3010/api/docs
- **æ—¶åŒº**: ä¸œå…«åŒº (Asia/Shanghai)

### äº‘å­˜å‚¨é…ç½®

```env
# ç«å±±å¼•æ“TOSé…ç½®
TOS_REGION=cn-beijing
TOS_ENDPOINT=https://tos-cn-beijing.volces.com
TOS_ACCESS_KEY_ID=your_access_key
TOS_ACCESS_KEY_SECRET=your_secret_key
TOS_BUCKET=your_bucket_name
TOS_CDN_DOMAIN=https://cdn.yourdomain.com
```

---

## 14. å¸¸è§é—®é¢˜

### Q: æ”¯æŒå“ªäº›æ–‡ä»¶æ ¼å¼ï¼Ÿ
A: å›¾ç‰‡æ ¼å¼ï¼ˆJPGã€PNGã€GIFã€BMPã€WEBPï¼‰å’Œæ–‡æ¡£æ ¼å¼ï¼ˆPDFã€DOCã€XLSã€PPTã€TXTï¼‰

### Q: æ–‡ä»¶å¤§å°é™åˆ¶æ˜¯å¤šå°‘ï¼Ÿ
A: å•ä¸ªæ–‡ä»¶æœ€å¤§10MBï¼Œå»ºè®®å›¾ç‰‡<5MBï¼Œæ–‡æ¡£<8MB

### Q: å¦‚ä½•æŸ¥çœ‹æ–‡ä»¶ä¸Šä¼ è¿›åº¦ï¼Ÿ
A: å½“å‰æ¥å£ä¸æ”¯æŒè¿›åº¦å›è°ƒï¼Œå»ºè®®å®¢æˆ·ç«¯å®ç°ä¸Šä¼ è¿›åº¦æ˜¾ç¤º

### Q: åˆ é™¤æ–‡ä»¶åèƒ½å¦æ¢å¤ï¼Ÿ
A: åˆ é™¤æ“ä½œä¸å¯æ¢å¤ï¼Œä¼šåŒæ—¶åˆ é™¤äº‘å­˜å‚¨å’Œæ•°æ®åº“è®°å½•

### Q: æ–‡ä»¶è®¿é—®æƒé™å¦‚ä½•æ§åˆ¶ï¼Ÿ
A: åŸºäºæ–‡ä»¶ç±»å‹å’Œç”¨æˆ·èº«ä»½ï¼Œä¼ä¸šæ–‡ä»¶åœ¨ä¼ä¸šå†…å…±äº«ï¼Œä¸ªäººæ–‡ä»¶ä»…æœ¬äººå¯è®¿é—®

### Q: CDNç¼“å­˜å¤šä¹…æ›´æ–°ï¼Ÿ
A: æ ¹æ®CDNé…ç½®ï¼Œä¸€èˆ¬ä¸º1å°æ—¶ï¼Œæ–°ä¸Šä¼ æ–‡ä»¶ç«‹å³å¯è®¿é—®

### Q: å¦‚ä½•æ‰¹é‡ä¸Šä¼ æ–‡ä»¶ï¼Ÿ
A: å½“å‰éœ€è¦é€ä¸ªè°ƒç”¨ä¸Šä¼ æ¥å£ï¼Œå»ºè®®å®¢æˆ·ç«¯å®ç°æ‰¹é‡ä¸Šä¼ é˜Ÿåˆ—